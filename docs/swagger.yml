openapi: 3.0.1
info:
  title: core-api
  version: "0.0"
paths:
  /api/v1/base:
    get:
      operationId: getBases
      parameters: []
      responses:
        default:
          description: getBases default response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Base'
    put:
      operationId: patchBase
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BaseReq'
        required: true
      responses:
        default:
          description: patchBase default response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Base'
    post:
      operationId: postBase
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BaseReq'
        required: true
      responses:
        default:
          description: postBase default response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Base'
  /api/v1/base/{baseId}/user/{username}:
    post:
      operationId: addUserToBaseAsOwner
      parameters:
      - name: baseId
        in: path
        required: true
        schema:
          type: string
      - name: username
        in: path
        required: true
        schema:
          type: string
      responses:
        default:
          description: addUserToBaseAsOwner default response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Base'
    delete:
      operationId: removeUserFromBaseAsOwner
      parameters:
      - name: baseId
        in: path
        required: true
        schema:
          type: string
      - name: username
        in: path
        required: true
        schema:
          type: string
      responses:
        default:
          description: removeUserFromBaseAsOwner default response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Base'
  /api/v1/base/{baseId}:
    delete:
      operationId: makeBaseInactive
      parameters:
      - name: baseId
        in: path
        required: true
        schema:
          type: string
      responses:
        default:
          description: makeBaseInactive default response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
  /api/v1/baseJoin/me:
    get:
      summary: Get all the joins and requests you've made
      operationId: getBases
      parameters: []
      responses:
        default:
          description: getBases default response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BaseJoin'
  /api/v1/baseJoin:
    post:
      operationId: requestIntoBase
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BaseJoinReq'
        required: true
      responses:
        default:
          description: requestIntoBase default response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseJoin'
  /api/v1/baseJoin/{baseId}:
    delete:
      operationId: makeBaseInactive
      parameters:
      - name: baseId
        in: path
        required: true
        schema:
          type: string
      responses:
        default:
          description: makeBaseInactive default response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
  /api/v1/person/me:
    get:
      operationId: getMe
      parameters: []
      responses:
        default:
          description: getMe default response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Person'
  /api/v1/person/{username}:
    get:
      operationId: getPerson
      parameters:
      - name: username
        in: path
        required: true
        schema:
          type: string
      responses:
        default:
          description: getPerson default response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Person'
  /api/v1/person:
    post:
      operationId: postPerson
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Person'
        required: true
      responses:
        default:
          description: postPerson default response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Person'
  /api/v1/mission/me:
    get:
      operationId: getOwnMissions
      parameters: []
      responses:
        default:
          description: getOwnMissions default response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Mission'
  /api/v1/mission/progress:
    post:
      operationId: progressMission
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                progressReq:
                  $ref: '#/components/schemas/ProgressReq'
        required: true
      responses:
        default:
          description: progressMission default response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Mission'
components:
  schemas:
    TouchBaseDomain:
      type: object
      properties:
        uuid:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    TouchBaseEntity:
      allOf:
      - $ref: '#/components/schemas/TouchBaseDomain'
      - type: object
        properties:
          creator:
            $ref: '#/components/schemas/Person'
          owner:
            $ref: '#/components/schemas/Person'
    Person:
      allOf:
      - $ref: '#/components/schemas/TouchBaseDomain'
      - type: object
        properties:
          authId:
            type: string
          username:
            type: string
          email:
            type: string
          score:
            type: number
            format: double
          firstName:
            type: string
          lastName:
            type: string
          bases:
            type: array
            items:
              $ref: '#/components/schemas/Base'
          created:
            type: array
            items:
              $ref: '#/components/schemas/Base'
          owns:
            type: array
            items:
              $ref: '#/components/schemas/Base'
    Base:
      allOf:
      - $ref: '#/components/schemas/TouchBaseEntity'
      - $ref: '#/components/schemas/TouchBaseDomain'
      - type: object
        properties:
          name:
            type: string
          score:
            type: number
            format: double
          imageUrl:
            type: string
          active:
            type: boolean
          members:
            type: array
            items:
              $ref: '#/components/schemas/Person'
          isActive:
            type: boolean
    BaseReq:
      type: object
      properties:
        name:
          type: string
        score:
          type: number
          format: double
        imageUrl:
          type: string
    Success:
      type: object
    BaseJoin:
      allOf:
      - $ref: '#/components/schemas/TouchBaseEntity'
      - $ref: '#/components/schemas/TouchBaseDomain'
      - type: object
        properties:
          baseId:
            type: string
          userId:
            type: string
          baseJoinAction:
            $ref: '#/components/schemas/BaseJoinAction'
    BaseJoinAction:
      type: string
      enum:
      - Request
      - Invite
    BaseJoinReq:
      type: object
      properties:
        baseId:
          type: string
        userId:
          type: string
        baseJoinAction:
          $ref: '#/components/schemas/BaseJoinAction'
    Mission:
      allOf:
      - $ref: '#/components/schemas/TouchBaseEntity'
      - $ref: '#/components/schemas/TouchBaseDomain'
      - type: object
        properties:
          name:
            type: string
          description:
            type: string
          scoreReward:
            type: number
            format: double
          missonType:
            $ref: '#/components/schemas/MissonType'
    MissonType:
      type: string
      enum:
      - PERIODIC
    ProgressReq:
      type: object
      properties:
        value:
          type: integer
          format: int32
